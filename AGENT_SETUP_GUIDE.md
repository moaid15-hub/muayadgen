# 🚀 MuayadGen Agent Edition - دليل التشغيل

## التغييرات الرئيسية

### ✅ ما تم إضافته:

**1. ملف tools.ts - الأدوات الحقيقية:**
- ✅ `read_file` - قراءة فعلية للملفات
- ✅ `write_file` - كتابة مباشرة
- ✅ `list_directory` - استعراض المجلدات
- ✅ `edit_file` - تعديل دقيق
- ✅ `execute_command` - تنفيذ أوامر
- ✅ `search_in_files` - بحث في الملفات

**2. ملف agent-client.ts - Agent Loop:**
- ✅ اتصال حقيقي بـ Claude API
- ✅ Function Calling فعلي
- ✅ Agent Loop يكرر حتى ينتهي
- ✅ معالجة Tool Results

**3. ملف cli-agent.ts - واجهة جديدة:**
- ✅ Agent Mode مباشر
- ✅ وضع تفاعلي
- ✅ Banner احترافي

---

## خطوات التنصيب

### 1. نقل الملفات

```bash
cd /media/amir/Boot/aliai/oqool-code

# نسخ الملفات الجديدة
cp /path/to/tools.ts src/
cp /path/to/agent-client.ts src/
cp /path/to/cli-agent.ts src/
```

### 2. تحديث package.json

أضف في `scripts`:
```json
{
  "scripts": {
    "build": "tsc",
    "dev": "tsc --watch"
  }
}
```

### 3. بناء المشروع

```bash
npm run build
```

### 4. الربط العالمي

```bash
npm link
```

---

## الاستخدام

### الأمر المباشر:
```bash
muayadgen "اقرأ src/api-client.ts واشرح كيف يختار المزود"
```

**ما سيحدث:**
1. ✅ Agent سيستخدم `read_file` فعلياً
2. ✅ سيقرأ الملف الحقيقي
3. ✅ سيشرح الكود بناء على القراءة الفعلية

### الوضع التفاعلي:
```bash
muayadgen
```

ثم اكتب طلباتك.

### مع مجلد محدد:
```bash
muayadgen "حلل هذا المشروع" -d /path/to/project
```

---

## أمثلة الاستخدام

### مثال 1: قراءة وفهم
```bash
muayadgen "اقرأ package.json واعرض اسم المشروع والتبعيات"
```

**النتيجة المتوقعة:**
```
🧠 MuayadGen يعمل الآن...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[Iteration 1]
سأقوم بقراءة الملف أولاً...

🔧 استخدام أداة: read_file
{ "path": "package.json" }
✓ نجحت

[Iteration 2]
بناء على قراءة الملف:

اسم المشروع: @oqool/muayadgen
الإصدار: 4.0.0
التبعيات الرئيسية:
- @anthropic-ai/sdk
- commander
- inquirer
...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ انتهى MuayadGen من العمل!
```

---

### مثال 2: تعديل ملف
```bash
muayadgen "في src/cli.ts - غير version من 3.13.0 إلى 4.0.0"
```

**ما سيحدث:**
1. قراءة `src/cli.ts`
2. استخدام `edit_file` للتعديل
3. تأكيد النجاح

---

### مثال 3: تحليل مشروع
```bash
muayadgen "حلل بنية src/ واعرض جميع الملفات .ts مع شرح مختصر"
```

**ما سيحدث:**
1. استخدام `list_directory` على `src/`
2. قراءة بعض الملفات للفهم
3. عرض تقرير مفصل حقيقي

---

## الفرق عن النسخة القديمة

### ❌ النسخة القديمة:
```javascript
// كانت تكتب كود عام:
createDefaultStructure() {
  this.structure = {
    'package.json': { ... } // افتراضات!
  };
}
```

### ✅ النسخة الجديدة:
```typescript
// تقرأ فعلياً:
const result = await readFile({ 
  path: 'package.json' 
});
// محتوى حقيقي من الملف!
```

---

## الاختبارات المقترحة

### اختبار 1: قراءة حقيقية
```bash
muayadgen "اقرأ src/auth.ts واعرض عدد الأسطر"
```

**المتوقع:** رقم دقيق من القراءة الفعلية

---

### اختبار 2: كتابة ملف
```bash
muayadgen "اصنع ملف test.js يطبع Hello Agent"
```

**المتوقع:** ملف حقيقي يتم إنشاؤه

---

### اختبار 3: استعراض
```bash
muayadgen "اعرض جميع ملفات src/"
```

**المتوقع:** قائمة فعلية من المجلد

---

### اختبار 4: تنفيذ
```bash
muayadgen "شغّل npm --version"
```

**المتوقع:** نتيجة الأمر الفعلي

---

## النتيجة المتوقعة

### قبل:
- ❌ تخمين وافتراضات
- ❌ كود عام جاهز
- ❌ لا فهم حقيقي
- **النسبة: 5-10%**

### بعد:
- ✅ قراءة فعلية
- ✅ فهم حقيقي
- ✅ تفاعل ذكي
- **النسبة المتوقعة: 70-85%**

---

## الخطوات التالية

1. ✅ نقل الملفات
2. ✅ البناء
3. ✅ الاختبار
4. 📊 قياس النتائج الفعلية
5. 🔧 تحسينات إضافية

---

**جاهز للاختبار! 🚀**
